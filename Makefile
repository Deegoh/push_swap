NAME = push_swap
ifeq ($(shell uname),Darwin)
	CHECKER = checker_Mac
else
	CHECKER = checker_linux
endif
CC = cc
CFLAGS = -Werror -Wall -Wextra -g #-fsanitize=address
SRC = push_swap.c\
	  print_utils.c\
	  init_utils.c\
	  parse_arg.c\
	  dll_utils.c\
	  nodes_utils.c\
	  rules_node.c\
	  op_utils.c\
	  simple_sort.c\
	  algo.c

RM = rm -f
LIBFT_DIR = ./libft/
INCLUDE = -I$(LIBFT_DIR)
LIB = -lft -L$(LIBFT_DIR)
ARG =`ruby -e "puts (1..500).to_a.shuffle.join(' ')"`
ARG =377 63 408 236 10 326 429 254 261 245 354 416 474 328 266 139 112 479 400 345 11 256 175 384 350 253 94 204 430 368 66 121 215 493 242 155 248 145 336 176 392 223 491 334 69 380 200 47 119 21 238 379 290 471 492 148 172 187 159 432 162 134 233 309 138 421 315 111 190 9 235 131 48 22 206 363 146 92 240 287 195 330 169 456 486 387 55 193 365 96 23 313 218 247 477 311 144 393 123 160 264 161 302 435 343 222 295 130 72 32 149 207 292 136 30 31 257 27 132 167 362 59 189 250 137 177 312 97 216 209 497 260 465 109 34 340 299 219 289 142 453 349 275 461 98 6 252 406 126 70 8 463 455 488 494 234 188 147 156 140 128 186 361 476 470 77 374 437 113 499 418 225 440 443 394 278 110 153 101 308 303 179 158 397 135 402 85 15 1 203 351 102 93 29 104 378 84 327 277 17 125 307 52 301 436 25 58 281 464 259 154 229 28 12 310 372 500 174 457 170 355 433 364 95 358 370 124 106 36 230 322 445 251 468 451 452 305 46 213 484 171 422 482 357 348 265 163 498 60 166 44 419 431 165 43 434 168 185 83 298 316 352 409 444 460 462 332 50 427 152 331 2 4 53 446 481 18 318 389 7 35 41 194 75 376 346 276 61 258 279 333 71 40 321 116 337 246 39 228 371 473 33 424 404 338 150 141 217 466 324 14 120 396 485 237 87 469 99 143 202 359 472 249 399 26 76 438 344 280 478 81 86 20 273 54 192 127 480 448 64 413 449 293 13 67 320 210 178 297 267 57 467 244 79 105 410 199 439 226 304 173 403 425 51 180 319 291 37 450 339 184 441 286 385 417 3 395 262 415 122 164 458 383 56 90 129 412 62 495 274 496 489 114 420 353 191 282 49 255 382 239 442 157 182 80 323 487 269 243 329 82 342 335 414 38 78 325 272 401 89 369 270 426 490 42 108 5 198 118 296 133 100 45 447 306 181 459 232 117 268 483 197 283 73 347 211 475 212 263 221 214 428 285 294 91 208 411 65 454 367 398 107 423 88 381 220 103 24 201 196 360 74 366 183 314 407 271 386 390 288 405 68 373 391 19 205 227 115 231 284 317 224 341 375 241 16 300 151 388 356
OBJ = $(SRC:.c=.o)

.PHONY: all clean fclean re libft v1 v2 test run wc checker lldb

all: $(NAME)

$(NAME): $(OBJ)
	@$(MAKE) all -sC $(LIBFT_DIR)
	$(CC) $(OBJ) $(LIB) $(INCLUDE) $(CFLAGS) -o $(NAME)
clean:
	$(RM) $(NAME)
	$(RM) $(OBJ)
	@$(MAKE) clean -sC $(LIBFT_DIR)
fclean: clean
	@$(MAKE) fclean -sC $(LIBFT_DIR)
re: fclean all

v1: all
	./pyviz.py $(ARG)
v2: all
	./push_swap_visualizer2.py $(ARG1)
test: all
	cp $(NAME) ../push_swap_tester/.
	bash ../push_swap_tester/tester.sh
run: all
	./$(NAME) $(ARG)
wc: all
	./$(NAME) $(ARG) | wc -l >> wc.txt
checker: all
	./$(NAME) $(ARG) | ./$(CHECKER) $(ARG)
lldb: all
	lldb $(NAME) $(ARG)
